{"version":3,"sources":["../node_modules/@material-ui/icons/LockOutlined.js","modules/User/validations/login.tsx","config/constants/variables.tsx","modules/User/hooks/useAuthToken.tsx","modules/User/components/LoginForm.tsx","modules/User/pages/Login.tsx"],"names":["_interopRequireDefault","require","Object","defineProperty","exports","value","default","_react","_createSvgIcon","_default","createElement","d"],"mappings":"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","file":"Login.672ca285.js","sourceRoot":"../../src","sourcesContent":["\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _react = _interopRequireDefault(require(\"react\"));\n\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\n\nvar _default = (0, _createSvgIcon.default)(_react.default.createElement(\"path\", {\n  d: \"M18 8h-1V6c0-2.76-2.24-5-5-5S7 3.24 7 6v2H6c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V10c0-1.1-.9-2-2-2zM9 6c0-1.66 1.34-3 3-3s3 1.34 3 3v2H9V6zm9 14H6V10h12v10zm-6-3c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2z\"\n}), 'LockOutlined');\n\nexports.default = _default;","import * as yup from \"yup\";\n\nexport enum fieldNames {\n  email = \"email\",\n  password = \"password\",\n}\n\nexport const validationSchema = yup.object().shape({\n  [fieldNames.email]: yup\n    .string()\n    .email()\n    .min(6)\n    .max(30)\n    .required()\n    .label(\"Email address\"),\n  [fieldNames.password]: yup\n    .string()\n    .min(8)\n    .max(30)\n    .required()\n    .label(\"Password\"),\n});\n","export enum LOCAL_STORAGE {\n  token = \"x-token\",\n}\nexport let authToken = \"\";\n","import { useApolloClient } from \"@apollo/client\";\nimport Cookie from \"js-cookie\";\nimport { useHistory } from \"react-router-dom\";\nimport { ROUTES } from \"../../../config/routes\";\nimport { LOCAL_STORAGE } from \"../../../config/constants/variables\";\n\nconst useAuthToken = () => {\n  const client = useApolloClient();\n  const history = useHistory();\n\n  const setAuthCookie = (token: string) => {\n    localStorage.setItem(LOCAL_STORAGE.token, token);\n    Cookie.set(\"jwttoken\", token);\n    // Cookie.set(\"jwttoken\", token { secure: true });\n    history.push(ROUTES.dashboard);\n  };\n\n  const logout = () => {\n    client.resetStore();\n    localStorage.clear();\n    history.push(\"/\");\n  };\n\n  return { setAuthCookie, logout };\n};\n\nexport default useAuthToken;\n","import React, { useEffect } from \"react\";\nimport { Link as RouterLink } from \"react-router-dom\";\n\nimport { makeStyles, createStyles, Theme } from \"@material-ui/core/styles\";\nimport {\n  Avatar,\n  Button,\n  Checkbox,\n  FormControlLabel,\n  Grid,\n  Link,\n  TextField,\n  Typography,\n  Zoom,\n} from \"@material-ui/core\";\nimport LockOutlinedIcon from \"@material-ui/icons/LockOutlined\";\nimport Input from \"./Input\";\nimport { useForm, Controller } from \"react-hook-form\";\nimport { fieldNames, validationSchema } from \"../validations/login\";\nimport { useLoginMutation } from \"../../../config/graphql\";\nimport useAuthToken from \"../hooks/useAuthToken\";\nimport { ErrorMessage } from \"../../../components/ErrorMessage\";\nimport { useAlert } from \"react-alert\";\n\nconst useStyles = makeStyles(({ spacing, palette }: Theme) =>\n  createStyles({\n    paper: {\n      marginTop: spacing(4),\n      padding: spacing(5),\n      display: \"flex\",\n      flexDirection: \"column\",\n      alignItems: \"center\",\n    },\n    avatar: {\n      margin: spacing(1),\n      backgroundColor: palette.secondary.main,\n    },\n    form: {\n      width: \"100%\", // Fixes IE 11 issue.\n      marginTop: spacing(3),\n    },\n    submit: { margin: spacing(3, 0, 2) },\n    options: {\n      justifyContent: \"center\",\n    },\n  })\n);\n\nconst LoginForm = () => {\n  const classes = useStyles();\n  const [login, { data }] = useLoginMutation();\n  const { register, handleSubmit, errors, control } = useForm({\n    validationSchema,\n    mode: \"onChange\",\n  });\n  const { setAuthCookie } = useAuthToken();\n\n  const onFormSubmit = async (values: any) => {\n    const { email, password } = values;\n    const response = await login({\n      variables: {\n        email,\n        password,\n      },\n    });\n\n    console.log(response);\n    console.log(\"Form submitted\");\n    if (response && response.data) {\n      const jwt = response.data.tokenAuth?.token;\n      if (jwt) {\n        setAuthCookie(jwt);\n      }\n    }\n  };\n\n  return (\n    <>\n      <Avatar className={classes.avatar}>\n        <LockOutlinedIcon />\n      </Avatar>\n      <Typography component=\"h1\" variant=\"h5\">\n        Sign in\n      </Typography>\n      <form\n        className={classes.form}\n        noValidate\n        onSubmit={handleSubmit(onFormSubmit)}\n      >\n        <Input type={fieldNames.email} register={register} autofocus />\n        <Input type={fieldNames.password} register={register} />\n        <FormControlLabel\n          control={\n            <Controller\n              as={Checkbox}\n              control={control}\n              defaultValue={false}\n              name=\"remember-me\"\n              color=\"primary\"\n            />\n          }\n          label=\"Remember me\"\n        />\n        <Button\n          type=\"submit\"\n          variant=\"contained\"\n          color=\"primary\"\n          fullWidth\n          className={classes.submit}\n        >\n          Sign in\n        </Button>\n        <Grid container className={classes.options}>\n          <Grid item xs>\n            <Link component={RouterLink} to=\"/\" variant=\"body2\">\n              Forgot password?\n            </Link>\n          </Grid>\n          <Grid item>\n            <Link component={RouterLink} to=\"/register\" variant=\"body2\">\n              Don't have an account? Sign up\n            </Link>\n          </Grid>\n        </Grid>\n      </form>\n    </>\n  );\n};\n\nexport default LoginForm;\n","import React from \"react\";\nimport { makeStyles, createStyles, Theme } from \"@material-ui/core/styles\";\nimport { Container, Paper } from \"@material-ui/core\";\nimport LoginForm from \"../components/LoginForm\";\nimport { Footer } from \"../../../components/Footer\";\n\nconst useStyles = makeStyles(({ spacing }: Theme) =>\n  createStyles({\n    paper: {\n      marginTop: spacing(4),\n      padding: spacing(5),\n      display: \"flex\",\n      flexDirection: \"column\",\n      alignItems: \"center\",\n    },\n  })\n);\n\nconst Login = () => {\n  const classes = useStyles();\n  return (\n    <div>\n      <Container component=\"main\" maxWidth=\"xs\">\n        <Paper elevation={3} className={classes.paper}>\n          <LoginForm />\n          {/*<Footer />*/}\n        </Paper>\n      </Container>\n      <Footer />\n    </div>\n  );\n};\n\nexport default Login;\n"]}