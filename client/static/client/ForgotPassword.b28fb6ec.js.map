{"version":3,"sources":["modules/User/components/ForgotPasswordForm.tsx","modules/User/pages/ForgotPassword.tsx"],"names":[],"mappings":"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","file":"ForgotPassword.b28fb6ec.js","sourceRoot":"../../src","sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport { Link as RouterLink, useHistory } from \"react-router-dom\";\nimport * as yup from \"yup\";\nimport { makeStyles, createStyles, Theme } from \"@material-ui/core/styles\";\nimport {\n  Avatar,\n  Button,\n  Checkbox,\n  FormControlLabel,\n  Grid,\n  Link,\n  TextField,\n  Typography,\n  Zoom,\n} from \"@material-ui/core\";\nimport Snackbar from \"@material-ui/core/Snackbar\";\nimport MuiAlert from \"@material-ui/lab/Alert\";\nimport LockOutlinedIcon from \"@material-ui/icons/LockOutlined\";\nimport Input from \"./Input\";\nimport { useForm, Controller } from \"react-hook-form\";\nimport { useForgotPasswordMutation } from \"../../../config/graphql\";\nimport useAuthToken from \"../hooks/useAuthToken\";\nimport { ErrorMessage } from \"../../../components/ErrorMessage\";\nimport { useAlert } from \"react-alert\";\nimport { gql, useApolloClient } from \"@apollo/client\";\n\nconst useStyles = makeStyles(({ spacing, palette }: Theme) =>\n  createStyles({\n    avatar: {\n      margin: spacing(1),\n      backgroundColor: palette.secondary.main,\n    },\n    form: {\n      width: \"100%\", // Fixes IE 11 issue.\n      marginTop: spacing(3),\n    },\n    note: {\n      paddingBottom: spacing(2),\n    },\n    submit: { margin: spacing(4, 0, 2) },\n  })\n);\n\nconst validationSchema = yup.object().shape({\n  [\"email\"]: yup.string().email().min(6).max(30).required().label(\"This field\"),\n});\n\nconst ForgotPasswordForm: React.FC<{}> = ({}) => {\n  const classes = useStyles();\n  const [ForgotPassword] = useForgotPasswordMutation();\n  const { register, handleSubmit, errors, control } = useForm({\n    validationSchema,\n    mode: \"onChange\",\n  });\n\n  const [message, setMessage] = useState(\"Enter your email address\");\n  const [show, setShow] = useState(true);\n\n  const onFormSubmit = async (values: any) => {\n    console.log(\"Form submitted\");\n    const response = await ForgotPassword({\n      variables: values,\n    });\n    if (response && response.data) {\n      setShow(false);\n      if (response.data.sendPasswordResetEmail?.errors) {\n        setMessage(\"Error: \" + response.data.sendPasswordResetEmail?.errors);\n      } else {\n        console.log(\"Success!\");\n        setMessage(\"Please check your inbox ðŸ“¨\");\n      }\n    }\n  };\n\n  return (\n    <>\n      <Avatar className={classes.avatar}>\n        <LockOutlinedIcon />\n      </Avatar>\n      <Typography component=\"h1\" variant=\"h5\">\n        Account recovery\n      </Typography>\n\n      <form\n        className={classes.form}\n        noValidate\n        onSubmit={handleSubmit(onFormSubmit)}\n      >\n        <Typography\n          component=\"p\"\n          variant=\"body1\"\n          align=\"center\"\n          className={classes.note}\n        >\n          {message}\n        </Typography>\n        {show && <Input type=\"email\" register={register} autofocus />}\n\n        {show && (\n          <Button\n            type=\"submit\"\n            variant=\"contained\"\n            color=\"primary\"\n            fullWidth\n            className={classes.submit}\n          >\n            Submit\n          </Button>\n        )}\n      </form>\n    </>\n  );\n};\n\nexport default ForgotPasswordForm;\n","import React, { useEffect } from \"react\";\nimport { useHistory } from \"react-router-dom\";\nimport { makeStyles, createStyles, Theme } from \"@material-ui/core/styles\";\nimport { Container, Paper } from \"@material-ui/core\";\nimport checkAuth from \"../hooks/checkAuth\";\nimport { ROUTES } from \"../../../config/routes\";\nimport { Page } from \"../../../components/Page\";\nimport ForgotPasswordForm from \"../components/ForgotPasswordForm\";\nimport { Footer } from \"../../../components/Footer\";\n\nconst useStyles = makeStyles(({ spacing }: Theme) =>\n  createStyles({\n    paper: {\n      marginTop: spacing(4),\n      padding: spacing(5),\n      display: \"flex\",\n      flexDirection: \"column\",\n      alignItems: \"center\",\n    },\n  })\n);\n\nconst ForgotPassword = () => {\n  const classes = useStyles();\n  const loggedIn = checkAuth();\n  const history = useHistory();\n\n  useEffect(() => {\n    if (loggedIn) {\n      console.log(\"Logged in:\" + loggedIn);\n      history.push(ROUTES.dashboard);\n    }\n  }, []);\n  return (\n    <Page>\n      <Container component=\"main\" maxWidth=\"xs\">\n        <Paper elevation={3} className={classes.paper}>\n          <ForgotPasswordForm />\n        </Paper>\n      </Container>\n      <Footer />\n    </Page>\n  );\n};\n\nexport default ForgotPassword;\n"]}