{"version":3,"sources":["config/constants/variables.tsx","modules/User/hooks/useAuthToken.tsx","modules/User/components/LoginForm.tsx","modules/User/pages/Login.tsx","modules/Home/index.tsx"],"names":[],"mappings":"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","file":"Home.32d264a4.js","sourceRoot":"../../src","sourcesContent":["export enum LOCAL_STORAGE {\n  token = \"x-token\",\n}\nexport let authToken = \"\";\n","import { useApolloClient } from \"@apollo/client\";\nimport Cookie from \"js-cookie\";\nimport { useHistory } from \"react-router-dom\";\nimport { ROUTES } from \"../../../config/routes.config\";\nimport { LOCAL_STORAGE } from \"../../../config/constants/variables\";\n\nconst useAuthToken = () => {\n  const client = useApolloClient();\n  const history = useHistory();\n\n  const setAuthCookie = (token: string) => {\n    localStorage.setItem(LOCAL_STORAGE.token, token);\n    Cookie.set(\"jwttoken\", token);\n    history.push(ROUTES.dashboard);\n  };\n\n  const logout = () => {\n    client.resetStore();\n    localStorage.clear();\n    history.push(\"/\");\n  };\n\n  return { setAuthCookie, logout };\n};\n\nexport default useAuthToken;\n","import React from \"react\";\nimport { useHistory } from \"react-router-dom\";\nimport { ROUTES } from \"../../../config/routes.config\";\nimport { useMutation } from \"@apollo/client\";\nimport { Input, Button, message as antdMessage } from \"antd\";\nimport { useForm, Controller } from \"react-hook-form\";\nimport { validationSchema } from \"./loginValidations\";\nimport ErrorMessage from \"../../../components/ErrorMessage\";\nimport {\n  useLoginMutation,\n  UserQuery,\n  UserDocument,\n} from \"../../../config/graphql\";\nimport useAuthToken from \"../hooks/useAuthToken\";\n\nenum fieldNames {\n  email = \"email\",\n  password = \"password\",\n}\n\nexport const LoginForm: React.FC = () => {\n  const { setAuthCookie } = useAuthToken();\n  const { handleSubmit, errors, control } = useForm({\n    validationSchema,\n    mode: \"onChange\",\n  });\n\n  const [\n    login,\n    { loading: isLogining, error, data: loginData },\n  ] = useLoginMutation();\n\n  React.useEffect(() => {\n    if (loginData) {\n    }\n  }, [loginData]);\n\n  React.useEffect(() => {\n    if (error) {\n      antdMessage.error(error.message);\n    }\n  }, [error]);\n\n  const onFormSubmit = async (values: any) => {\n    const { email, password } = values;\n    const response = await login({\n      variables: {\n        email,\n        password,\n      },\n      update: (store, { data }) => {\n        if (!data) {\n          return null;\n        }\n        store.writeQuery<UserQuery>({\n          query: UserDocument,\n          data: {\n            user: data.tokenAuth?.user,\n          },\n        });\n      },\n    });\n\n    console.log(response);\n    console.log(\"Form submitted\");\n    if (response && response.data) {\n      const jwt = response.data.tokenAuth?.token;\n      if (jwt) {\n        setAuthCookie(jwt);\n      }\n    }\n  };\n\n  return (\n    <form onSubmit={handleSubmit(onFormSubmit)}>\n      <h2>Log in</h2>\n      <br />\n      <Controller\n        name={fieldNames.email}\n        control={control}\n        as={<Input placeholder=\"Email\" />}\n      />\n      <ErrorMessage errors={errors} name={fieldNames.email} />\n      <br />\n      <Controller\n        name={fieldNames.password}\n        control={control}\n        as={<Input type=\"password\" placeholder=\"Password\" />}\n      />\n      <br />\n      <ErrorMessage errors={errors} name={fieldNames.password} />\n      <Button block type=\"primary\" htmlType=\"submit\" loading={isLogining}>\n        Log in\n      </Button>\n    </form>\n  );\n};\n\nexport default LoginForm;\n","import React, { useEffect } from \"react\";\nimport { useHistory, Redirect } from \"react-router-dom\";\nimport { getAuthToken } from \"../../../config/authToken\";\nimport { useUserQuery } from \"../../../config/graphql\";\nimport { ROUTES } from \"../../../config/routes.config\";\nimport LoginForm from \"../components/LoginForm\";\n\nexport const Login: React.FC = () => {\n  return (\n    <div>\n      <LoginForm />\n    </div>\n  );\n};\n","import React, { useEffect } from \"react\";\nimport { useHistory } from \"react-router-dom\";\nimport { getAuthToken } from \"../../config/authToken\";\nimport { useUserQuery } from \"../../config/graphql\";\nimport { ROUTES } from \"../../config/routes.config\";\nimport { Login } from \"../User/pages/Login\";\n\nconst Home = () => {\n  return (\n    <div>\n      Hello, Cocksucker.\n      <Login />\n    </div>\n  );\n};\n\nexport default Home;\n"]}